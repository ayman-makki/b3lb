###############################################################################
# B3LB Production Environment Configuration for Hetzner EX44
#
# Copy this file to .env and fill in your actual values:
#   cp .env.hetzner.example .env
#
# SECURITY WARNING: Never commit .env to version control!
# Add .env to your .gitignore file.
###############################################################################

###############################################################################
# B3LB Version
###############################################################################
B3LB_VERSION=3.3.2

###############################################################################
# Django Core Configuration
###############################################################################

# SECRET_KEY: Cryptographic signing key (50+ characters)
# Generate with: python3 -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
SECRET_KEY=your-secret-key-here-minimum-50-characters-change-this-before-deployment

# TIME_ZONE: Server timezone (IANA timezone database name)
# Examples: Europe/Paris, America/New_York, UTC, Asia/Tokyo
TIME_ZONE=Europe/Paris

###############################################################################
# Database Configuration (PostgreSQL)
###############################################################################

POSTGRES_DB=b3lb
POSTGRES_USER=b3lb

# POSTGRES_PASSWORD: Strong password for PostgreSQL
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=change-me-strong-postgres-password

###############################################################################
# Redis Configuration
###############################################################################

# REDIS_PASSWORD: Strong password for Redis
# Generate with: openssl rand -base64 32
REDIS_PASSWORD=change-me-strong-redis-password

###############################################################################
# Hetzner DNS Configuration (for Let's Encrypt)
###############################################################################

# HETZNER_DNS_API_TOKEN: API token from Hetzner DNS Console
# Get it from: https://dns.hetzner.com/settings/api-token
# Requires: Read and Write permissions
HETZNER_DNS_API_TOKEN=your-hetzner-dns-api-token-here

###############################################################################
# Traefik Dashboard Authentication
###############################################################################

# TRAEFIK_DASHBOARD_AUTH: Basic auth for Traefik dashboard
# Generate with: echo $(htpasswd -nb admin your-password) | sed -e s/\\$/\\$\\$/g
# Or use online generator: https://hostingcanada.org/htpasswd-generator/
# Format: username:$$apr1$$hashed-password
TRAEFIK_DASHBOARD_AUTH=admin:$$apr1$$change-this$$with-real-htpasswd-hash

###############################################################################
# Grafana Configuration
###############################################################################

GRAFANA_ADMIN_USER=admin

# GRAFANA_ADMIN_PASSWORD: Strong password for Grafana admin
# Generate with: openssl rand -base64 16
GRAFANA_ADMIN_PASSWORD=change-me-strong-grafana-password

###############################################################################
# B3LB Frontend Configuration
###############################################################################

# WEB_CONCURRENCY: Number of Uvicorn workers per frontend container
# Recommendation: 5 workers per container (3 containers = 15 total workers)
# Adjust based on load (1-10 per container)
WEB_CONCURRENCY=5

###############################################################################
# B3LB Recording Configuration
###############################################################################

# B3LB_RECORD_PROFILES: Comma-separated list of video quality profiles
# Options: 480p, 720p, 1080p, 1440p, 4k
# More profiles = more processing time and storage
B3LB_RECORD_PROFILES=720p,1080p

###############################################################################
# Optional: S3-Compatible Storage (Fallback if Storage Box fails)
###############################################################################

# If Hetzner Storage Box mount fails, you can use S3-compatible storage
# Examples: Hetzner Object Storage, AWS S3, MinIO, Backblaze B2

# S3_ACCESS_KEY: Your S3 access key ID
S3_ACCESS_KEY=

# S3_SECRET_KEY: Your S3 secret access key
S3_SECRET_KEY=

# S3_BUCKET_NAME: Bucket name for recordings
S3_BUCKET_NAME=b3lb-recordings

# S3_ENDPOINT_URL: S3 endpoint URL
# Hetzner Object Storage: https://nbg1.your-objectstorage.com
# AWS S3 (us-east-1): leave empty or https://s3.amazonaws.com
# AWS S3 (other regions): https://s3.region.amazonaws.com
S3_ENDPOINT_URL=

###############################################################################
# Hetzner Storage Box Configuration (for scripts)
###############################################################################

# STORAGEBOX_HOST: Your Storage Box hostname
# Format: uXXXXXX.your-storagebox.de (check Hetzner Robot panel)
STORAGEBOX_HOST=u123456.your-storagebox.de

# STORAGEBOX_USERNAME: Storage Box username (usually same as hostname)
STORAGEBOX_USERNAME=u123456

# STORAGEBOX_PASSWORD: Storage Box password
# Get from Hetzner Robot: https://robot.hetzner.com/storage
STORAGEBOX_PASSWORD=your-storagebox-password

# STORAGEBOX_MOUNT_POINT: Local mount point for Storage Box
STORAGEBOX_MOUNT_POINT=/mnt/b3lb-recordings

# STORAGEBOX_SUBDIRECTORY: Subdirectory within Storage Box for recordings
# Leave empty to use root, or specify like: /b3lb/recordings
STORAGEBOX_SUBDIRECTORY=/b3lb

###############################################################################
# Backup Configuration
###############################################################################

# BACKUP_RETENTION_DAYS: Number of days to keep backups
BACKUP_RETENTION_DAYS=30

# BACKUP_STORAGE_PATH: Where to store backups
# Can be Storage Box mount point or another location
BACKUP_STORAGE_PATH=/mnt/b3lb-recordings/backups

###############################################################################
# Email Configuration (Optional - for alerts)
###############################################################################

# EMAIL_HOST: SMTP server hostname
EMAIL_HOST=smtp.example.com

# EMAIL_PORT: SMTP server port (25, 587, or 465)
EMAIL_PORT=587

# EMAIL_USE_TLS: Use TLS encryption (True/False)
EMAIL_USE_TLS=True

# EMAIL_HOST_USER: SMTP username
EMAIL_HOST_USER=noreply@example.com

# EMAIL_HOST_PASSWORD: SMTP password
EMAIL_HOST_PASSWORD=

# DEFAULT_FROM_EMAIL: Default sender email address
DEFAULT_FROM_EMAIL=b3lb@b3lb.serveur.cc

# SERVER_EMAIL: Email address for error notifications
SERVER_EMAIL=admin@b3lb.serveur.cc

###############################################################################
# Advanced Configuration (usually don't need to change)
###############################################################################

# POSTGRES_MAX_CONNECTIONS: Maximum database connections
# Default: 200 (sufficient for most deployments)
POSTGRES_MAX_CONNECTIONS=200

# REDIS_MAXMEMORY: Maximum Redis memory (in GB or MB)
# Default: 4gb (adjust based on available RAM)
REDIS_MAXMEMORY=4gb

# CELERY_WORKER_CONCURRENCY: Threads per Celery worker
# Default: auto-detected based on CPU cores
# CELERY_WORKER_CONCURRENCY=4

###############################################################################
# Development/Debug Settings (DO NOT ENABLE IN PRODUCTION!)
###############################################################################

# DEBUG: Enable Django debug mode (NEVER set to True in production!)
# DEBUG=False

# DJANGO_LOG_LEVEL: Logging verbosity
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# DJANGO_LOG_LEVEL=INFO
