###############################################################################
# B3LB Local Development Environment Configuration
#
# This file contains simplified settings for local development.
# Copy this to .env for local development:
#   cp .env.local .env
#
# SECURITY WARNING: This is for LOCAL DEVELOPMENT ONLY!
# Never use these settings in production!
###############################################################################

###############################################################################
# B3LB Version
###############################################################################
B3LB_VERSION=3.3.2

###############################################################################
# Django Core Configuration
###############################################################################

# SECRET_KEY: Development key (DO NOT use in production!)
SECRET_KEY=dev-key-local-only

# DEBUG: Enable debug mode for development
DEBUG=True

# ALLOWED_HOSTS: Allow localhost access
ALLOWED_HOSTS=localhost,127.0.0.1,frontend

# TIME_ZONE: Local timezone
TIME_ZONE=UTC

# LANGUAGE_CODE: Default language
LANGUAGE_CODE=en-us

###############################################################################
# Database Configuration (PostgreSQL)
###############################################################################

POSTGRES_DB=b3lb_dev
POSTGRES_USER=b3lb_dev
POSTGRES_PASSWORD=dev_password_change_in_production

# PostgreSQL connection URL for Django
# Format: postgres://user:password@host:port/database
DATABASE_URL=postgres://b3lb_dev:dev_password_change_in_production@postgres:5432/b3lb_dev

# Basic PostgreSQL settings (lighter for local dev)
POSTGRES_MAX_CONNECTIONS=100

###############################################################################
# Redis Configuration
###############################################################################

# Redis password (simple for local dev)
REDIS_PASSWORD=dev_redis_password

# Redis memory limit (lower for local dev)
REDIS_MAXMEMORY=1gb

# Redis URLs for different purposes
# Celery Broker (DB 0)
CELERY_BROKER_URL=redis://:dev_redis_password@redis:6379/0
CELERY_RESULT_BACKEND=redis://:dev_redis_password@redis:6379/0

# Django Cache (DB 1)
CACHE_URL=redis://:dev_redis_password@redis:6379/1

# ORM Cache (DB 2)
CACHEOPS_REDIS=redis://:dev_redis_password@redis:6379/2
CACHEOPS_DEGRADE_ON_FAILURE=True

###############################################################################
# B3LB Frontend Configuration
###############################################################################

# B3LB_API_BASE_DOMAIN: Use localhost for local development
B3LB_API_BASE_DOMAIN=localhost

# WEB_CONCURRENCY: Number of Uvicorn workers (lower for local dev)
WEB_CONCURRENCY=2

# B3LB Node Configuration
B3LB_NODE_PROTOCOL=http://
B3LB_NODE_DEFAULT_DOMAIN=localhost
B3LB_NODE_REQUEST_TIMEOUT=10

###############################################################################
# B3LB Recording Configuration (DISABLED for local dev)
###############################################################################

# Disable rendering for local development (enable if testing recordings)
B3LB_RENDERING=False

# Use local storage (no S3 needed for dev)
B3LB_RECORD_STORAGE=local
B3LB_RECORD_LOCAL_PATH=/recordings

# Recording profiles (if you enable rendering later)
B3LB_RECORD_PROFILES=720p

###############################################################################
# Task Queue Configuration
###############################################################################

# Use single queue for local development (simpler)
B3LB_TASK_QUEUE_CORE=b3lb
B3LB_TASK_QUEUE_HOUSEKEEPING=b3lb
B3LB_TASK_QUEUE_RECORD=b3lb-record
B3LB_TASK_QUEUE_STATISTICS=b3lb

###############################################################################
# Email Configuration (Optional - usually not needed for local dev)
###############################################################################

# Leave empty or configure if testing email features
# EMAIL_HOST=localhost
# EMAIL_PORT=1025
# EMAIL_USE_TLS=False
# DEFAULT_FROM_EMAIL=b3lb@localhost
# SERVER_EMAIL=admin@localhost

###############################################################################
# Celery Configuration
###############################################################################

# Worker concurrency (auto-detect based on CPU cores)
# CELERY_WORKER_CONCURRENCY=4

###############################################################################
# Django Logging
###############################################################################

# Set to DEBUG for verbose logging during development
DJANGO_LOG_LEVEL=INFO

###############################################################################
# Development Notes
###############################################################################

# After setting up this environment:
# 1. Run: docker-compose -f docker-compose.local.yml up -d
# 2. Wait for services to be healthy
# 3. Run migrations: docker-compose -f docker-compose.local.yml exec frontend ./manage.py migrate
# 4. Create superuser: docker-compose -f docker-compose.local.yml exec frontend ./manage.py createsuperuser
# 5. Access at: http://localhost:8000/admin/
# 6. API endpoint: http://localhost:8000/b3lb/ping
#
# To view logs:
#   docker-compose -f docker-compose.local.yml logs -f frontend
#
# To run Django commands:
#   docker-compose -f docker-compose.local.yml exec frontend ./manage.py <command>
#
# To run tests:
#   docker-compose -f docker-compose.local.yml exec frontend ./manage.py test
#
# To access database directly:
#   psql -h localhost -p 5432 -U b3lb_dev -d b3lb_dev
#
# To access Redis CLI:
#   docker-compose -f docker-compose.local.yml exec redis redis-cli -a dev_redis_password
