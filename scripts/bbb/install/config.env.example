#!/usr/bin/env bash
# B3LB BBB Node Installation Configuration
# Copy this file to config.env and customize for your environment

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# B3LB Backend API URL (REQUIRED for b3lb-push)
# Example: https://b3lb-api.example.com
# Note: No trailing slash
B3LB_BACKEND_URL="https://b3lb.example.com"

# ============================================================================
# OPTIONAL CONFIGURATION
# ============================================================================

# Meeting cleanup timeout in hours (default: 12)
# Meetings running longer than this will be terminated by b3lb-cleaner
MEETING_TIMEOUT_HOURS="12"

# Metadata tag name for B3LB nonce (default: b3lb-nonce)
# This tag must match what's configured in B3LB backend
B3LB_NONCE_TAG="b3lb-nonce"

# ============================================================================
# SERVICE ENABLEMENT
# ============================================================================

# Enable b3lb-load service (CPU monitoring)
# Set to "true" or "false" (default: true)
ENABLE_LOAD="true"

# Enable b3lb-push service (recording upload)
# Set to "true" or "false" (default: true)
ENABLE_PUSH="true"

# Enable b3lb-cleaner service (meeting cleanup)
# Set to "true" or "false" (default: false)
# Note: This is optional and can be disabled if you prefer manual cleanup
ENABLE_CLEANER="true"

# ============================================================================
# ADVANCED CONFIGURATION (usually no changes needed)
# ============================================================================

# BBB published recordings directory
PUBLISHED_FOLDER="/var/bigbluebutton/published/presentation"

# Queue database directory
QUEUE_DIR="/var/bigbluebutton/b3lb"

# Queue database filename
QUEUE_FILE="queue.db"

# B3LB scripts installation directory
B3LB_LIB_DIR="/usr/local/lib/b3lb"

# B3LB configuration directory
B3LB_CONF_DIR="/etc/b3lb"

# B3LB cleaner scripts directory
B3LB_SCRIPTS_DIR="/opt/b3lb/scripts"

# ============================================================================
# VALIDATION
# ============================================================================

# Do not edit below this line
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
    echo "This file should be sourced, not executed directly."
    echo "Usage: source config.env"
    exit 1
fi
